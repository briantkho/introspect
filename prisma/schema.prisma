
datasource db {
  provider = "sqlite"
  url      = "file:./nextUp.db"
}

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native"]
}

model User {
  uid        String @id @default(cuid())
  first_name String
  last_name  String
  user_name  String @unique
  email      String @unique
  password   String
  habits     Habit[]
}

model Habit {
  habit_id           String @id @default(cuid())
  uid                String
  name               String
  frequency_per_week Float
  description        String?
  start_date         DateTime
  end_date           DateTime?
  status             Int
  user               User @relation(fields: [uid], references: [uid])
  reminders          Reminder[]
  habit_reflection   HabitReflection[]
  task               Task[]
}

model UpdateHabit{
  habit_id           String @id
  uid                String
  name               String?
  frequency_per_week Float?
  description        String?
  start_date         DateTime?
  end_date           DateTime?
  status             Int?
}

model Reminder {
  reminder_id     String @id @default(cuid())
  habit_id        String
  reminder_time   DateTime
  alert_time_mins Int
  habit           Habit @relation(fields: [habit_id], references: [habit_id])
} 

model HabitReflection {
  hr_id            String @id @default(cuid())
  habit_id         String
  description      String
  habit            Habit @relation(fields: [habit_id], references: [habit_id])
  self_reflections SelfReflection[]
}

model SelfReflection {
  sf_id            String @id @default(cuid())
  hr_id            String
  description      String
  date             DateTime
  habit_reflection HabitReflection @relation(fields: [hr_id], references: [hr_id])
}

model Task {
  task_id  String @id @default(cuid())
  habit_id String
  checked  Int
  date     DateTime
  habit    Habit @relation(fields: [habit_id], references: [habit_id])
}


